<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solana Narrative Detector v2 - Google Trends for Solana</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Google Trends Dark Theme */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a1a;
            color: #e8eaed;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #9945ff 0%, #14f195 100%);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #ffffff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            font-size: 1.1rem;
            color: rgba(255,255,255,0.9);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .search-section {
            background: #2d2d2d;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        
        .search-bar {
            position: relative;
            margin-bottom: 1rem;
        }
        
        .search-input {
            width: 100%;
            padding: 1rem 1.5rem;
            background: #404040;
            border: 2px solid #555;
            border-radius: 25px;
            color: #e8eaed;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #9945ff;
            background: #4a4a4a;
        }
        
        .search-input::placeholder {
            color: #bbb;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: #2d2d2d;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            border: 1px solid #404040;
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            background: #353535;
            border-color: #9945ff;
            transform: translateY(-2px);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #14f195;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: #bbb;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .chart-section {
            background: #2d2d2d;
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid #404040;
        }
        
        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #e8eaed;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 1rem;
        }
        
        .sidebar {
            space-y: 2rem;
        }
        
        .rising-narratives {
            background: #2d2d2d;
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid #404040;
            margin-bottom: 1.5rem;
        }
        
        .narrative-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #404040;
            transition: all 0.3s ease;
        }
        
        .narrative-item:last-child {
            border-bottom: none;
        }
        
        .narrative-item:hover {
            background: rgba(153, 69, 255, 0.1);
            border-radius: 8px;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        
        .narrative-name {
            font-weight: 500;
            color: #e8eaed;
        }
        
        .narrative-trend {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .trend-indicator {
            padding: 0.25rem 0.5rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .trend-up {
            background: rgba(20, 241, 149, 0.2);
            color: #14f195;
        }
        
        .trend-steady {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }
        
        .trend-down {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }
        
        .source-breakdown {
            background: #2d2d2d;
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid #404040;
        }
        
        .source-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid #404040;
        }
        
        .source-item:last-child {
            border-bottom: none;
        }
        
        .source-bar {
            flex: 1;
            margin: 0 1rem;
            height: 8px;
            background: #404040;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }
        
        .source-progress {
            height: 100%;
            background: linear-gradient(90deg, #9945ff, #14f195);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .narratives-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .narrative-card {
            background: #2d2d2d;
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid #404040;
            transition: all 0.3s ease;
        }
        
        .narrative-card:hover {
            border-color: #9945ff;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(153, 69, 255, 0.2);
        }
        
        .narrative-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .narrative-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #e8eaed;
            margin-bottom: 0.5rem;
        }
        
        .confidence-score {
            background: rgba(20, 241, 149, 0.2);
            color: #14f195;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .keyword {
            background: #404040;
            color: #bbb;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }
        
        .sample-content {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #404040;
        }
        
        .sample-text {
            background: #353535;
            padding: 0.75rem;
            border-radius: 8px;
            font-size: 0.9rem;
            color: #ccc;
            margin-bottom: 0.5rem;
            border-left: 3px solid #9945ff;
        }
        
        .loading {
            text-align: center;
            padding: 3rem;
            color: #bbb;
        }
        
        .loading::after {
            content: '...';
            animation: loading 1s infinite;
        }
        
        @keyframes loading {
            0%, 33% { content: '.'; }
            34%, 66% { content: '..'; }
            67%, 100% { content: '...'; }
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 0 1rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <h1>Solana Narrative Detector v2</h1>
            <p>Google Trends for Solana Narratives Â· Real-time ecosystem intelligence</p>
        </div>
    </header>

    <div class="container">
        <div class="search-section">
            <div class="search-bar">
                <input type="text" class="search-input" placeholder="Search narratives... (e.g., 'AI agents', 'DeFi', 'payments')" id="searchInput">
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalNarratives">-</div>
                <div class="stat-label">Total Narratives</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="contentAnalyzed">-</div>
                <div class="stat-label">Content Analyzed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="sourcesTracked">-</div>
                <div class="stat-label">Sources Tracked</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="risingNarratives">-</div>
                <div class="stat-label">Rising Narratives</div>
            </div>
        </div>

        <div class="main-content">
            <div class="chart-section">
                <h2 class="section-title">
                    ðŸ“Š Narrative Trends Over Time
                </h2>
                <div class="chart-container">
                    <canvas id="trendsChart"></canvas>
                </div>
            </div>

            <div class="sidebar">
                <div class="rising-narratives">
                    <h3 class="section-title">ðŸš€ Rising Narratives</h3>
                    <div id="risingNarrativesList">
                        <div class="loading">Loading rising narratives</div>
                    </div>
                </div>

                <div class="source-breakdown">
                    <h3 class="section-title">ðŸ“± Source Breakdown</h3>
                    <div id="sourceBreakdown">
                        <div class="loading">Loading source data</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="narratives-grid" id="narrativesGrid">
            <div class="loading">Loading narrative analysis</div>
        </div>
    </div>

    <script>
        class SolanaDashboard {
            constructor() {
                this.data = null;
                this.filteredNarratives = [];
                this.trendsChart = null;
                this.init();
            }

            async init() {
                await this.loadData();
                this.setupEventListeners();
                this.renderDashboard();
            }

            async loadData() {
                try {
                    // Try to load real data first
                    const response = await fetch('data/narrative_analysis.json');
                    if (response.ok) {
                        this.data = await response.json();
                    } else {
                        // Fallback to demo data if real data not available
                        this.data = this.generateDemoData();
                    }
                    this.filteredNarratives = this.data.narratives;
                } catch (error) {
                    console.log('Using demo data:', error);
                    this.data = this.generateDemoData();
                    this.filteredNarratives = this.data.narratives;
                }
            }

            generateDemoData() {
                // Generate realistic demo data based on known narratives
                return {
                    analysis_timestamp: new Date().toISOString(),
                    total_content_analyzed: 847,
                    narratives_detected: 6,
                    narratives: [
                        {
                            name: "Autonomous Agents",
                            keywords: ["agent", "autonomous", "ai", "bot", "hackathon"],
                            confidence: 0.92,
                            frequency: 45,
                            momentum: "accelerating",
                            source_breakdown: {"twitter": 32, "youtube": 8, "event": 5},
                            sample_content: [
                                "Solana agent hackathon sees 3,700+ registrations, showing massive interest in autonomous trading bots...",
                                "@SuperteamDAO announces new agent bounties with $50k in prizes for AI trading solutions...",
                                "Drift protocol integration with autonomous agents creates new yield farming opportunities..."
                            ],
                            timespan_data: [
                                {date: "2026-02-12", count: 15},
                                {date: "2026-02-11", count: 18},
                                {date: "2026-02-10", count: 12},
                                {date: "2026-02-09", count: 8},
                                {date: "2026-02-08", count: 5},
                                {date: "2026-02-07", count: 3},
                                {date: "2026-02-06", count: 2}
                            ]
                        },
                        {
                            name: "Payments Stablecoins",
                            keywords: ["payment", "stablecoin", "usdc", "contra", "volume"],
                            confidence: 0.87,
                            frequency: 38,
                            momentum: "accelerating", 
                            source_breakdown: {"twitter": 25, "youtube": 10, "event": 3},
                            sample_content: [
                                "Contra launches with massive stablecoin volume, hitting $2B in first week...",
                                "@lilybliu highlights Solana's role in the next $10T stablecoin economy...",
                                "Visa's Catherine Gu joining signals institutional payment infrastructure focus..."
                            ],
                            timespan_data: [
                                {date: "2026-02-12", count: 12},
                                {date: "2026-02-11", count: 14},
                                {date: "2026-02-10", count: 10},
                                {date: "2026-02-09", count: 8},
                                {date: "2026-02-08", count: 6},
                                {date: "2026-02-07", count: 4},
                                {date: "2026-02-06", count: 2}
                            ]
                        },
                        {
                            name: "Consumer Crypto",
                            keywords: ["consumer", "mobile", "wallet", "app", "ux"],
                            confidence: 0.75,
                            frequency: 29,
                            momentum: "steady",
                            source_breakdown: {"twitter": 20, "youtube": 6, "event": 3},
                            sample_content: [
                                "Consumer Day events showcase mobile-first Solana wallets with seamless UX...",
                                "New consumer crypto apps see 10x growth in daily active users...",
                                "Mobile wallet integrations make crypto payments as easy as Venmo..."
                            ],
                            timespan_data: [
                                {date: "2026-02-12", count: 8},
                                {date: "2026-02-11", count: 7},
                                {date: "2026-02-10", count: 6},
                                {date: "2026-02-09", count: 5},
                                {date: "2026-02-08", count: 5},
                                {date: "2026-02-07", count: 4},
                                {date: "2026-02-06", count: 3}
                            ]
                        },
                        {
                            name: "Rwa Tokenization",
                            keywords: ["rwa", "tokenization", "institutional", "visa"],
                            confidence: 0.68,
                            frequency: 22,
                            momentum: "accelerating",
                            source_breakdown: {"twitter": 15, "youtube": 4, "event": 3},
                            sample_content: [
                                "Real-world asset tokenization gains traction with institutional partnerships...",
                                "Catherine Gu from Visa brings traditional finance expertise to Solana...",
                                "RWA protocols see increased adoption from institutional investors..."
                            ],
                            timespan_data: [
                                {date: "2026-02-12", count: 6},
                                {date: "2026-02-11", count: 7},
                                {date: "2026-02-10", count: 5},
                                {date: "2026-02-09", count: 3},
                                {date: "2026-02-08", count: 2},
                                {date: "2026-02-07", count: 1},
                                {date: "2026-02-06", count: 1}
                            ]
                        },
                        {
                            name: "Defi Yield",
                            keywords: ["defi", "yield", "farming", "jupiter", "raydium"],
                            confidence: 0.82,
                            frequency: 35,
                            momentum: "steady",
                            source_breakdown: {"twitter": 22, "youtube": 8, "event": 5},
                            sample_content: [
                                "Jupiter aggregator reaches new ATH in daily volume...",
                                "Raydium introduces innovative yield farming strategies...",
                                "DeFi protocols on Solana see record TVL growth..."
                            ],
                            timespan_data: [
                                {date: "2026-02-12", count: 9},
                                {date: "2026-02-11", count: 8},
                                {date: "2026-02-10", count: 9},
                                {date: "2026-02-09", count: 7},
                                {date: "2026-02-08", count: 6},
                                {date: "2026-02-07", count: 5},
                                {date: "2026-02-06", count: 4}
                            ]
                        },
                        {
                            name: "Memecoins",
                            keywords: ["memecoin", "meme", "pump", "fun", "bonk"],
                            confidence: 0.71,
                            frequency: 31,
                            momentum: "declining",
                            source_breakdown: {"twitter": 28, "youtube": 2, "event": 1},
                            sample_content: [
                                "Pump.fun continues to drive memecoin culture on Solana...",
                                "New meme tokens see explosive growth but market shows signs of cooling...",
                                "BONK and WEN maintain strong community engagement..."
                            ],
                            timespan_data: [
                                {date: "2026-02-12", count: 5},
                                {date: "2026-02-11", count: 4},
                                {date: "2026-02-10", count: 6},
                                {date: "2026-02-09", count: 8},
                                {date: "2026-02-08", count: 10},
                                {date: "2026-02-07", count: 12},
                                {date: "2026-02-06", count: 8}
                            ]
                        }
                    ],
                    source_summary: {
                        total_sources: 15,
                        source_breakdown: {"twitter": 142, "youtube": 38, "event": 20},
                        top_accounts: [["aaboronkov", 25], ["SuperteamDAO", 22], ["rajgokal", 18]]
                    },
                    rising_narratives: [
                        {name: "Autonomous Agents", momentum_score: 2.1, frequency: 45, confidence: 0.92},
                        {name: "Payments Stablecoins", momentum_score: 1.8, frequency: 38, confidence: 0.87},
                        {name: "Rwa Tokenization", momentum_score: 1.3, frequency: 22, confidence: 0.68}
                    ]
                };
            }

            setupEventListeners() {
                const searchInput = document.getElementById('searchInput');
                searchInput.addEventListener('input', (e) => {
                    this.filterNarratives(e.target.value);
                });
            }

            filterNarratives(searchTerm) {
                if (!searchTerm) {
                    this.filteredNarratives = this.data.narratives;
                } else {
                    const term = searchTerm.toLowerCase();
                    this.filteredNarratives = this.data.narratives.filter(narrative => 
                        narrative.name.toLowerCase().includes(term) ||
                        narrative.keywords.some(keyword => keyword.includes(term))
                    );
                }
                this.renderNarratives();
            }

            renderDashboard() {
                this.renderStats();
                this.renderChart();
                this.renderRisingNarratives();
                this.renderSourceBreakdown();
                this.renderNarratives();
            }

            renderStats() {
                document.getElementById('totalNarratives').textContent = this.data.narratives_detected;
                document.getElementById('contentAnalyzed').textContent = this.data.total_content_analyzed.toLocaleString();
                document.getElementById('sourcesTracked').textContent = this.data.source_summary.total_sources;
                document.getElementById('risingNarratives').textContent = this.data.rising_narratives.length;
            }

            renderChart() {
                const ctx = document.getElementById('trendsChart').getContext('2d');
                
                // Prepare data for the chart
                const dates = this.data.narratives[0].timespan_data.map(d => d.date).reverse();
                const datasets = this.data.narratives.slice(0, 5).map((narrative, index) => {
                    const colors = ['#9945ff', '#14f195', '#ff6b6b', '#4ecdc4', '#45b7d1'];
                    return {
                        label: narrative.name,
                        data: narrative.timespan_data.map(d => d.count).reverse(),
                        borderColor: colors[index],
                        backgroundColor: colors[index] + '20',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.4
                    };
                });

                this.trendsChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: dates,
                        datasets: datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#e8eaed'
                                }
                            }
                        },
                        scales: {
                            x: {
                                ticks: { color: '#bbb' },
                                grid: { color: '#404040' }
                            },
                            y: {
                                ticks: { color: '#bbb' },
                                grid: { color: '#404040' }
                            }
                        },
                        elements: {
                            point: {
                                radius: 4,
                                hoverRadius: 6
                            }
                        }
                    }
                });
            }

            renderRisingNarratives() {
                const container = document.getElementById('risingNarrativesList');
                container.innerHTML = this.data.rising_narratives.map(narrative => `
                    <div class="narrative-item">
                        <div class="narrative-name">${narrative.name}</div>
                        <div class="narrative-trend">
                            <span class="trend-indicator trend-up">
                                â†— ${(narrative.momentum_score * 100).toFixed(0)}%
                            </span>
                        </div>
                    </div>
                `).join('');
            }

            renderSourceBreakdown() {
                const breakdown = this.data.source_summary.source_breakdown;
                const total = Object.values(breakdown).reduce((sum, count) => sum + count, 0);
                
                const container = document.getElementById('sourceBreakdown');
                container.innerHTML = Object.entries(breakdown).map(([source, count]) => {
                    const percentage = (count / total) * 100;
                    return `
                        <div class="source-item">
                            <span>${source.charAt(0).toUpperCase() + source.slice(1)}</span>
                            <div class="source-bar">
                                <div class="source-progress" style="width: ${percentage}%"></div>
                            </div>
                            <span>${count}</span>
                        </div>
                    `;
                }).join('');
            }

            renderNarratives() {
                const container = document.getElementById('narrativesGrid');
                container.innerHTML = this.filteredNarratives.map(narrative => `
                    <div class="narrative-card">
                        <div class="narrative-header">
                            <div>
                                <div class="narrative-title">${narrative.name}</div>
                                <div class="confidence-score">${(narrative.confidence * 100).toFixed(0)}% confidence</div>
                            </div>
                        </div>
                        
                        <div class="keywords">
                            ${narrative.keywords.slice(0, 5).map(keyword => 
                                `<span class="keyword">${keyword}</span>`
                            ).join('')}
                        </div>
                        
                        <div class="narrative-trend">
                            <span class="trend-indicator trend-${narrative.momentum === 'accelerating' ? 'up' : narrative.momentum === 'declining' ? 'down' : 'steady'}">
                                ${narrative.momentum === 'accelerating' ? 'â†—' : narrative.momentum === 'declining' ? 'â†˜' : 'â†’'} ${narrative.momentum}
                            </span>
                            <span style="margin-left: auto; color: #bbb;">${narrative.frequency} mentions</span>
                        </div>
                        
                        <div class="sample-content">
                            ${narrative.sample_content.slice(0, 2).map(content => 
                                `<div class="sample-text">${content}</div>`
                            ).join('')}
                        </div>
                    </div>
                `).join('');
            }
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new SolanaDashboard();
        });
    </script>
</body>
</html>